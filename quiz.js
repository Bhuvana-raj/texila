function loadAssessment(){0==currASlide?startAssessment():currASlide==noOfQtns[currModule-1]&&endAssessment(),$("#myModalAssInst").modal("hide")}function startAssessment(){$("#prev-btn, #next-btn").css("display","none"),userAnswers[currModule]=[],isAssessment=!0,showQuizQtn()}function endAssessment(){currASlide=0,isAssessment=!1,currModule==completedModule&&noOfSlides.length-1!=completedModule?(currModule++,completedModule++,enableCompletedModules()):closeWindow(),changeModule(currModule,1)}function showQuizQtn(){if(currASlide==noOfQtns[currModule-1]){for(var e=0,s=0,t=0,o=1;o<=noOfQtns[currModule-1];o++)1==userAnswers[currModule][o-1]?e++:0==userAnswers[currModule][o-1]?t++:s++;return $("#myModalAssInst .modal-header h4").html("SCORE BOARD"),$("#myModalAssInst .modal-body p").html("Total No. of Questions :&emsp;"+noOfQtns[currModule-1]+"</br>No. of Correct Answers :&emsp;"+e+"</br>No. of Wrong Answers :&emsp;"+t),currModule==noOfSlides.length-1?(courseComplete(),$("#myModalAssInst .modal-body p").html("You have completed the course. If you wish to repeat the course, click <b> Repeat Course </b> else click <b>Exit</b> to quit the course."),1==assessmentCount&&($("#myModalAssInst .assmntRetake").removeClass("hide"),$("#myModalAssInst .modal-body p").html("Total No. of Questions :&emsp;"+noOfQtns[currModule-1]+"</br>No. of Correct Answers :&emsp;"+e+"</br>No. of Wrong Answers :&emsp;"+t+"</br></br>You have successfully completed the course!!!</br>If you wish to repeat the course, click <b>Repeat Course</b></br>To quit the course click <b>Exit</b>")),$("#myModalAssInst .cancelbtn").text("Repeat Course"),$("#myModalAssInst .okbtn").text("Exit")):($(".cancelbtn").prop("disabled",!0),$(".cancelbtn").css("opacity","0.01")),void $("#myModalAssInst").modal("show")}convertArrToString(),$(".xmlcontent").load("Modules/Module_"+currModule+"/QP_M"+currModule+"_P"+(currASlide+1)+".html",function(e,s){"success"==s&&($(".xmlcontent").fadeIn(600),applyCSS(),buttonHandler(),$(".point").text(points))}),$(".page-number").html("<h4>Page "+addZero(Number(currASlide)+1)+" of "+noOfQtns[currModule-1]+"</h4>"),currASlide++}function buttonHandler(){$("#quizbtn").addClass("disabled"),$("input[type='radio']").change(function(){$("#quizbtn").removeClass("disabled")})}function submitRBHandler(){var e=$("video")[0];$("input[type=radio]").attr("disabled",!0),$("#quizbtn").addClass("disabled");var s=0,t=0;userAnswers[currModule][currASlide-1]=0,e.src="game/failure.mp4";var o=1,n=0;$.each($("input[type='radio']"),function(){o++,"1"==$(".controls label:nth-child("+(o-1)+") input").attr("ans")&&$(".controls label:nth-child("+(o-1)+")").append("<img id='theImg' src='images/tick.png'/>")}),$.each($("input[type='radio']:checked"),function(){s=$("input[type='radio']:checked").val(),t=Number($("input[type='radio']:checked").attr("ans")),n=Number($("input[type='radio']:checked").attr("value"))}),s&&t?(userAnswers[currModule][currASlide-1]=1,e.src="game/success.mp4"):$(".controls label:nth-child("+n+")").append("<img id='theImg' src='images/cross.png'/>"),convertArrToString(),e.load(),e.play(),e.onended=function(e){showQuizQtn()}}function submitCBHandler(){$("#quizbtn").addClass("disabled");var e=0;userAnswers[currModule][currASlide-1]=0,$.each($("input[type='checkbox']"),function(){0!=Number($(this).attr("ans"))&&e++});var s=[],t=[];$.each($("input[type='checkbox']:checked"),function(){s.push($(this).val()),t.push($(this).attr("ans"))}),t.join(", "),s.join(", "),0!=e&&t.equals(s)&&s.length==Number(e)&&(userAnswers[currModule][currASlide-1]=1),convertArrToString(),showQuizQtn()}function convertArrToString(){var e="";totalScore=0,points=0;for(var s=1;s<=noOfSlides.length-1;s++)if(userAnswers[s]){for(var t=1;t<=noOfQtns[currModule-1];t++)1==userAnswers[s][t-1]?(e+="1",points+=1,totalScore+=quizWeight):e+=0==userAnswers[s][t-1]?"0":":";e+="|"}$(".point").text(points),1==assessmentCount&&(fstAssmntScore=totalScore);var o=isComplete?"_COMPLETED":"_INCOMPLETE";set("cmi.score.scaled",totalScore),set("cmi.score.raw",totalScore),set("cmi.scaled_passing_score:",totalScore),set("cmi.score.min",60),set("cmi.score.max",100),console.log(o),set("cmi.location",String(currModule+"_"+currSlide+"_"+completedModule+o+"_"+assessmentCount+"_"+fstAssmntScore)),set("cmi.suspend_data",e)}function convertStrToArray(e){for(var s=1;s<=e.split("|").length-1;s++)userAnswers[s]=[],userAnswers[s]=e.split("|")[s-1].split("")}function resetAssessment(){assessmentCount=2,currModule=1,currSlide=1,completedModule=1,isComplete=!1,userAnswers=[],changeModule(1,1),$("#myModalAssInst .cancelbtn").text("CANCEL"),$("#myModalAssInst .okbtn").text("OK"),$("#myModalMenu .modal-body ul li a").addClass("disabled"),$("#myModalMenu .modal-body ul li:nth-child(1) a").removeClass("disabled"),$("#myModalAssInst .assmntRetake").addClass("hide"),set("cmi.score.raw",0),set("cmi.scaled_passing_score:",0),set("cmi.suspend_data",""),set("cmi.location",String(currModule+"_"+currSlide+"_"+completedModule+"_INCOMPLETE_"+assessmentCount+"_"+fstAssmntScore))}var points=0,noOfQtns=[5,75,32];$(document).ready(function(){$("#myModalAssInst .okbtn").click(function(){return userAnswers.length-1==noOfSlides.length-1?void closeWindow():void(currModule==noOfSlides.length-1&&nilAssessment?closeWindow():loadAssessment())}),$("#myModalAssInst .cancelbtn").click(function(){return $("#myModalAssInst").modal("hide"),userAnswers.length-1==noOfSlides.length-1?void changeModule(1,1):void(nilAssessment&&currModule==noOfSlides.length-1&&changeModule(1,1))}),$("#myModalAssInst .assmntRetake").click(function(){$("#myModalAssInst").modal("hide"),resetAssessment()})});